<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Email Signature Generator — lemlist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="icons/favicon.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>Email Signature Generator</h1>
    <div class="actions">
      <div class="brand-switch" role="tablist" aria-label="Brand switch">
        <button class="seg is-active" id="brandLemlist" data-brand="lemlist" role="tab" aria-selected="true" title="lemlist">
          <img src="icons/lemlist-app.png" alt="lemlist" width="24" height="24" />
        </button>
        <button class="seg" id="brandTaplio" data-brand="taplio" role="tab" aria-selected="false" title="Taplio">
          <img src="icons/taplio-app.png" alt="Taplio" width="24" height="24" />
        </button>
      </div>

      <button class="btnprim" id="copyGmail">Copy for Gmail</button>
      <button class="btn ghost" id="openGmail" title="Open Gmail Settings">Open Gmail</button>
      <button class="btn ghost" id="gmailTutorialBtn" title="Tutoriel pas-à-pas">Tutorial</button>
    </div>
  </header>

  <main class="wrap">
    <!-- Preview -->
    <section class="panel preview">
      <div class="preview-inner" id="previewInner">
        <div class="signature-base" id="signatureBase">
          <div class="preview-card" id="previewCard">
            <div id="signaturePreview"></div>
          </div>
          <img src="icons/badge.png" alt="Badge" class="site-badge" />
        </div>
      </div>
    </section>

    <!-- Form -->
    <aside class="panel form">
      <form class="form-scrollguard" onsubmit="return false;">
        <div class="grid-1">
          <div class="row">
            <label for="name">Full Name</label>
            <input type="text" id="name" value="Bertrand Deveseleer" />
          </div>

          <div class="row">
            <label for="role">Job Title</label>
            <input type="text" id="role" value="Brand Designer" placeholder="Your job title"/>
          </div>

          <div class="row">
            <label for="email">Email</label>
            <input type="email" id="email" value="bertrand@lemlist.com" placeholder="mail@lemlist.com" />
          </div>

          <div class="row">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" value="+33 6 66 66 66 66" placeholder="+33 6 66 66 66 66" />
          </div>

          <!-- Réseaux -->
          <div class="row social-row">
            <div class="social-item">
              <div class="social-head">
                <label for="linkedin">LinkedIn</label>
                <label class="switch">
                  <input type="checkbox" id="linkedinToggle" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <input type="url" id="linkedin" value="https://www.linkedin.com/in/bertrand-deveseleer-15866213a/" placeholder="Your LinkedIn Link" />
            </div>

            <div class="social-item">
              <div class="social-head">
                <label for="lemcal">lemcal</label>
                <label class="switch">
                  <input type="checkbox" id="lemcalToggle" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <input type="url" id="lemcal" value="https://www.linkedin.com/in/bertrand-deveseleer-15866213a/" placeholder="Your lemcal Link" />
            </div>
          </div>

          <!-- Uploads -->
          <div class="row grid-2">
            <!-- Photo -->
            <div>
              <label>Photo</label>
              <div class="file-input" data-kind="avatar">
                <input type="file" id="avatarFile" accept="image/*" />
                <button type="button" class="btn file-btn" id="avatarBtn">
                  <span class="file-label" title="Upload photo">Upload photo</span>
                </button>
                <button type="button" class="clear-btn" id="avatarClear" aria-label="Remove photo" title="Remove photo">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M8 8 L16 16 M16 8 L8 16"></path>
                  </svg>
                </button>
              </div>
              <p id="avatarError" class="input-error" aria-live="polite" hidden>
                L’image doit être carrée (largeur = hauteur).
              </p>
            </div>

            <!-- Banner -->
            <div>
              <div class="social-head">
                <label>Banner (500x160)</label>
                <label class="switch">
                  <input type="checkbox" id="bannerToggle" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div class="file-input" data-kind="banner">
                <input type="file" id="bannerFile" accept="image/*" />
                <button type="button" class="btn file-btn" id="bannerBtn">
                  <span class="file-label" title="Upload banner">Upload banner</span>
                </button>
                <button type="button" class="clear-btn" id="bannerClear" aria-label="Remove banner" title="Remove banner">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M8 8 L16 16 M16 8 L8 16"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </aside>
  </main>

  <!-- Supabase client + config -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    window.SUPABASE_CFG = {
      url: 'https://gdkuxrrxwnufdbpqooim.supabase.co',
      anon: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdka3V4cnJ4d251ZmRicHFvb2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3Mjk3MTYsImV4cCI6MjA3NDMwNTcxNn0.ZGKsAy-76dBUtnOtqEpccaRvcKejA0VIpQl8owNI9VU',
      bucket: 'signatures',
      folder: 'avatars',
      bannersFolder: 'banners'
    };
  </script>

  <!-- Gmail Tutorial Modal -->
  <div id="gmailTutorialModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="gmailTutorialTitle">
    <div class="modal__backdrop" data-close="true"></div>
    <div class="modal__dialog" role="document">
      <header class="modal__header">
        <h2 id="gmailTutorialTitle" tabindex="-1">Add your signature in Gmail</h2>
        <button class="modal__close" aria-label="Close tutorial" data-close="true">×</button>
      </header>

      <div class="modal__body">
        <ol class="steps">
          <li>
            Click <strong>“Open Gmail”</strong> — you’ll land directly on <em>Settings &gt; General</em>.
            <figure class="step-figure">
              <img src="icons/tutorial-step1.png" alt="Gmail Settings — General tab opened" />
            </figure>
          </li>
          <li>
            In <strong>Signature</strong>, click <strong>“Create new”</strong>.
            <figure class="step-figure">
              <img src="icons/tutorial-step2.png" alt="Create a new signature in Gmail" />
            </figure>
          </li>
          <li>
            Come back here, click <strong>“Copy for Gmail”</strong>, puis collez.
            <figure class="step-figure">
              <img src="icons/tutorial-step3.png" alt="Paste the signature into Gmail editor" />
            </figure>
          </li>
          <li>
            Under <strong>Signature defaults</strong>, choose it for new emails/replies.
            <figure class="step-figure">
              <img src="icons/tutorial-step4.png" alt="Set signature defaults in Gmail" />
            </figure>
          </li>
          <li>
            Save changes and test.
            <figure class="step-figure">
              <img src="icons/tutorial-step5.png" alt="Save changes and test the signature" />
            </figure>
          </li>
        </ol>

        <div class="specs">
          <h3>Image specs to respect</h3>
          <ul>
            <li><strong>Avatar</strong>: square, recommended <code>89×89</code> to <code>600×600</code> px.</li>
            <li><strong>Banner</strong>: recommended <code>500×160</code> px.</li>
            <li><strong>Formats</strong>: <code>PNG</code>, <code>JPG</code>, <code>WebP</code>.</li>
            <li><strong>Max size</strong>: up to <code>8&nbsp;MB</code>.</li>
          </ul>
        </div>
      </div>

      <footer class="modal__footer">
        <button class="btn ghost" id="openGmailFromModal">Open Gmail</button>
      </footer>
    </div>
  </div>

<!-- Image Cropper Modal (compact, English) -->
<div id="imgCropperModal" class="cropper-modal" aria-hidden="true" role="dialog" aria-label="Image editor">
  <div class="cropper-dialog">
    <header class="cropper-header">
      <h2>Adjust image</h2>
      <button class="cropper-close btn ghost" type="button" aria-label="Close">&times;</button>
    </header>

    <!-- Canvas area (white) -->
    <div class="cropper-canvas-wrap">
      <canvas id="cropperCanvas" width="560" height="560"></canvas>
      <!-- Dark mask only over the image area -->
      <div class="cropper-overlay">
        <div class="crop-box" aria-hidden="true"></div>
      </div>
    </div>

    <!-- Zoom slider -->
    <div class="cropper-zoombar">
      <label for="zoomSlider">Zoom</label>
      <input id="zoomSlider" type="range" min="0.5" max="3" step="0.01" value="1" />
    </div>

    <!-- Actions -->
    <div class="cropper-toolbar">
      <div class="group left">
        <!-- Annuler removed -->
        <button type="button" class="btn ghost" data-act="reset">Reset</button>
      </div>
      <div class="group right">
        <button type="button" class="btnprim" data-act="confirm">Confirm</button>
      </div>
    </div>
  </div>
</div>

  <script src="app.js"></script>
</body>
</html>
